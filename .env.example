# ============================================================================
# Flux AI - 环境变量配置文件 / Environment Variables Configuration
# ============================================================================
# 
# 本文件包含所有环境变量的示例配置。请复制此文件为 .env.local 并填入实际值。
# This file contains example configurations for all environment variables.
# Copy this file to .env.local and fill in actual values.
#
# 重要提示 / Important Notes:
# - .env.local 文件不会被提交到 Git（已在 .gitignore 中配置）
# - .env.local file is not committed to Git (configured in .gitignore)
# - 必需变量标记为 [REQUIRED]，可选变量标记为 [OPTIONAL]
# - Required variables are marked [REQUIRED], optional ones [OPTIONAL]
# - 生产环境部署时，请在部署平台（Vercel/Cloudflare）设置这些变量
# - For production deployment, set these variables in your deployment platform
#
# ============================================================================

# ============================================================================
# 数据库配置 / Database Configuration
# ============================================================================

# [REQUIRED] PostgreSQL 数据库连接字符串
# PostgreSQL database connection string
# 
# 格式 / Format: postgresql://[user]:[password]@[host]:[port]/[database]?sslmode=require
# 
# 获取方式 / How to obtain:
# 1. Neon (推荐 / Recommended): https://neon.tech
#    - 注册账号后创建项目，复制连接字符串
#    - Sign up, create a project, and copy the connection string
# 2. Supabase: https://supabase.com
# 3. Railway: https://railway.app
# 4. 本地 PostgreSQL / Local PostgreSQL
# 
# 故障排查 / Troubleshooting:
# - 确保包含 ?sslmode=require 参数（生产环境必需）
# - Ensure ?sslmode=require parameter is included (required for production)
# - 如果连接失败，检查数据库是否已启动且网络可访问
# - If connection fails, check if database is running and network accessible
# - 运行 npm run prisma:migrate 初始化数据库表结构
# - Run npm run prisma:migrate to initialize database schema
DATABASE_URL="postgresql://user:password@host:port/database?sslmode=require"


# ============================================================================
# NextAuth 认证配置 / NextAuth Authentication Configuration
# ============================================================================

# [REQUIRED] 应用的完整 URL（包含协议和端口）
# Full URL of your application (including protocol and port)
# 
# 开发环境 / Development: http://localhost:3000
# 生产环境 / Production: https://yourdomain.com
# 
# 注意 / Note:
# - 生产环境必须使用 HTTPS
# - Production must use HTTPS
# - 此 URL 用于 OAuth 回调和会话管理
# - This URL is used for OAuth callbacks and session management
NEXTAUTH_URL="http://localhost:3000"

# [REQUIRED] NextAuth 会话加密密钥（至少 32 字符）
# NextAuth session encryption secret (minimum 32 characters)
# 
# 生成方式 / How to generate:
# 方法 1 / Method 1: openssl rand -base64 32
# 方法 2 / Method 2: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# 方法 3 / Method 3: 访问 / Visit https://generate-secret.vercel.app/32
# 
# 安全提示 / Security Tips:
# - 每个环境使用不同的密钥
# - Use different secrets for each environment
# - 定期轮换密钥（建议每 90 天）
# - Rotate secrets regularly (recommended every 90 days)
# - 切勿在代码中硬编码或提交到 Git
# - Never hardcode in code or commit to Git
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"


# ============================================================================
# Google OAuth 配置 / Google OAuth Configuration
# ============================================================================

# [REQUIRED] Google OAuth 客户端 ID（公开可见）
# Google OAuth Client ID (publicly visible)
# 
# 获取方式 / How to obtain:
# 1. 访问 Google Cloud Console: https://console.cloud.google.com
# 2. 创建新项目或选择现有项目
#    Create a new project or select existing one
# 3. 启用 Google+ API
#    Enable Google+ API
# 4. 创建 OAuth 2.0 客户端 ID（Web 应用类型）
#    Create OAuth 2.0 Client ID (Web application type)
# 5. 添加授权重定向 URI / Add authorized redirect URIs:
#    - 开发 / Dev: http://localhost:3000/api/auth/callback/google
#    - 生产 / Prod: https://yourdomain.com/api/auth/callback/google
# 
# 故障排查 / Troubleshooting:
# - 确保重定向 URI 完全匹配（包括协议、域名、路径）
# - Ensure redirect URI matches exactly (protocol, domain, path)
# - 检查 Google Cloud Console 中的 OAuth 同意屏幕配置
# - Check OAuth consent screen configuration in Google Cloud Console
NEXT_PUBLIC_GOOGLE_CLIENT_ID="your-google-client-id"

# [REQUIRED] Google OAuth 客户端密钥（保密）
# Google OAuth Client Secret (keep secret)
# 
# 注意 / Note:
# - 此密钥仅在服务端使用，不会暴露给客户端
# - This secret is only used server-side, never exposed to client
# - 如果泄露，立即在 Google Cloud Console 重新生成
# - If leaked, regenerate immediately in Google Cloud Console
GOOGLE_CLIENT_SECRET="your-google-client-secret"


# ============================================================================
# Replicate API 配置 / Replicate API Configuration
# ============================================================================

# [REQUIRED] Replicate API 令牌（用于 AI 图像生成）
# Replicate API Token (for AI image generation)
# 
# 获取方式 / How to obtain:
# 1. 注册 Replicate 账号: https://replicate.com
# 2. 访问账号设置 / Visit account settings: https://replicate.com/account/api-tokens
# 3. 创建新的 API 令牌 / Create a new API token
# 
# 支持的模型 / Supported models:
# - Flux Schnell (快速 / Fast)
# - Flux Dev (开发 / Development)
# - Flux Pro (专业 / Professional)
# - Flux 1.1 Pro
# - Flux 1.1 Ultra
# 
# 成本估算 / Cost estimation:
# - Schnell: ~$0.003 per image
# - Dev: ~$0.025 per image
# - Pro: ~$0.055 per image
# - Ultra: ~$0.12 per image
# 
# 故障排查 / Troubleshooting:
# - 确保账户有足够余额
# - Ensure account has sufficient balance
# - 检查 API 令牌是否有效且未过期
# - Check if API token is valid and not expired
# - 查看 Replicate 控制台的使用量和限制
# - Check usage and limits in Replicate dashboard
REPLICATE_API_TOKEN="your-replicate-api-token"


# ============================================================================
# Stripe 支付配置 / Stripe Payment Configuration
# ============================================================================

# [REQUIRED] Stripe 可发布密钥（公开可见，用于客户端）
# Stripe Publishable Key (publicly visible, used in client-side)
# 
# 获取方式 / How to obtain:
# 1. 注册 Stripe 账号: https://stripe.com
# 2. 访问开发者 / Developers -> API keys
# 3. 复制 Publishable key
# 
# 注意 / Note:
# - 测试环境使用 pk_test_ 开头的密钥
# - Use pk_test_ prefix for test environment
# - 生产环境使用 pk_live_ 开头的密钥
# - Use pk_live_ prefix for production environment
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="your-stripe-publishable-key"

# [REQUIRED] Stripe 密钥（保密，仅服务端使用）
# Stripe Secret Key (keep secret, server-side only)
# 
# 注意 / Note:
# - 测试环境使用 sk_test_ 开头的密钥
# - Use sk_test_ prefix for test environment
# - 生产环境使用 sk_live_ 开头的密钥
# - Use sk_live_ prefix for production environment
# - 切勿在客户端代码中使用此密钥
# - Never use this key in client-side code
STRIPE_SECRET_KEY="your-stripe-secret-key"

# [REQUIRED] Stripe Webhook 签名密钥（用于验证 Webhook 请求）
# Stripe Webhook Signing Secret (for verifying webhook requests)
# 
# 获取方式 / How to obtain:
# 1. 访问 Stripe Dashboard -> Developers -> Webhooks
# 2. 添加端点 / Add endpoint:
#    - 开发 / Dev: http://localhost:3000/api/webhook
#    - 生产 / Prod: https://yourdomain.com/api/webhook
# 3. 选择监听事件 / Select events to listen:
#    - checkout.session.completed
#    - payment_intent.succeeded
#    - payment_intent.payment_failed
# 4. 复制签名密钥 / Copy signing secret (whsec_...)
# 
# 故障排查 / Troubleshooting:
# - 本地测试使用 Stripe CLI: stripe listen --forward-to localhost:3000/api/webhook
# - For local testing, use Stripe CLI
# - 确保 Webhook 端点可公开访问（生产环境）
# - Ensure webhook endpoint is publicly accessible (production)
STRIPE_WEBHOOK_SECRET="your-stripe-webhook-secret"

# [REQUIRED] Stripe 价格 ID - 基础套餐
# Stripe Price ID - Basic Plan
# 
# 获取方式 / How to obtain:
# 1. 访问 Stripe Dashboard -> Products
# 2. 创建产品和价格 / Create product and price
# 3. 复制价格 ID (price_...)
# 
# 建议配置 / Recommended configuration:
# - 基础套餐: 100 积分 / Basic: 100 points
# - 专业套餐（月付）: 500 积分 / Pro Monthly: 500 points
# - 专业套餐（年付）: 6000 积分 / Pro Yearly: 6000 points
NEXT_PUBLIC_STRIPE_BASIC_PRICE_ID="your-basic-price-id"
NEXT_PUBLIC_STRIPE_PRO_MONTH_PRICE_ID="your-pro-month-price-id"
NEXT_PUBLIC_STRIPE_PRO_YEAR_PRICE_ID="your-pro-year-price-id"


# ============================================================================
# 应用 URL 配置 / Application URL Configuration
# ============================================================================

# [REQUIRED] 应用基础 URL（用于生成绝对路径）
# Application base URL (for generating absolute paths)
# 
# 开发环境 / Development: http://localhost:3000
# 生产环境 / Production: https://yourdomain.com
# 
# 用途 / Usage:
# - 生成分享链接 / Generate share links
# - 构建 sitemap / Build sitemap
# - 邮件中的链接 / Links in emails
NEXT_PUBLIC_BASE_URL="http://localhost:3000"

# [REQUIRED] 应用完整 URL（与 NEXT_PUBLIC_BASE_URL 通常相同）
# Application full URL (usually same as NEXT_PUBLIC_BASE_URL)
NEXT_PUBLIC_APP_URL="http://localhost:3000"


# ============================================================================
# 安全配置 / Security Configuration
# ============================================================================

# [REQUIRED] IP 地址哈希盐值（用于匿名化 IP 地址）
# IP address hashing salt (for anonymizing IP addresses)
# 
# 生成方式 / How to generate:
# openssl rand -hex 32
# 
# 用途 / Usage:
# - 防止滥用和限流 / Abuse prevention and rate limiting
# - 保护用户隐私（不存储原始 IP）
# - Protect user privacy (don't store raw IPs)
# 
# 注意 / Note:
# - 每个环境使用不同的盐值
# - Use different salts for each environment
# - 更改此值会导致现有限流记录失效
# - Changing this value will invalidate existing rate limit records
IP_SALT="generate-random-salt-with-openssl-rand-hex-32"

# [REQUIRED] 浏览器指纹哈希盐值（用于匿名化设备指纹）
# Browser fingerprint hashing salt (for anonymizing device fingerprints)
# 
# 生成方式 / How to generate:
# openssl rand -hex 32
# 
# 用途 / Usage:
# - 追踪免费用户使用量 / Track free user usage
# - 防止滥用 / Prevent abuse
# - 跨会话识别设备（不依赖 cookies）
# - Identify devices across sessions (without cookies)
FINGERPRINT_SALT="generate-random-salt-with-openssl-rand-hex-32"


# ============================================================================
# 管理员配置 / Admin Configuration
# ============================================================================

# [OPTIONAL] 管理员用户 ID 列表（逗号分隔）
# Admin user IDs (comma-separated)
# 
# 获取方式 / How to obtain:
# 1. 注册管理员账号 / Register admin account
# 2. 查询数据库获取用户 ID / Query database for user ID:
#    SELECT id FROM "User" WHERE email = 'admin@example.com';
# 3. 将 ID 添加到此列表 / Add ID to this list
# 
# 示例 / Example:
# ADMIN_USER_IDS="clx1234567890,clx0987654321"
# 
# 用途 / Usage:
# - 访问管理员面板 / Access admin dashboard
# - 查看系统指标 / View system metrics
# - 管理用户和内容 / Manage users and content
ADMIN_USER_IDS=""


# ============================================================================
# 开发环境配置 / Development Environment Configuration
# ============================================================================

# [OPTIONAL] Node.js 运行环境
# Node.js runtime environment
# 
# 可选值 / Options:
# - development: 开发模式（详细日志、热重载）/ Dev mode (verbose logs, hot reload)
# - production: 生产模式（优化性能、最小日志）/ Prod mode (optimized, minimal logs)
# - test: 测试模式 / Test mode
# 
# 注意 / Note:
# - Next.js 会自动设置此变量
# - Next.js automatically sets this variable
# - 通常不需要手动配置
# - Usually no need to manually configure
NODE_ENV="development"

# [OPTIONAL] 禁用 Next.js 遥测数据收集
# Disable Next.js telemetry data collection
# 
# 设置为 1 禁用遥测 / Set to 1 to disable telemetry
# 
# 了解更多 / Learn more:
# https://nextjs.org/telemetry
NEXT_TELEMETRY_DISABLED=1


# ============================================================================
# 可选的第三方服务配置 / Optional Third-Party Service Configuration
# ============================================================================

# [OPTIONAL] Upstash Redis（用于限流和缓存）
# Upstash Redis (for rate limiting and caching)
# 
# 获取方式 / How to obtain:
# 1. 注册 Upstash: https://upstash.com
# 2. 创建 Redis 数据库 / Create Redis database
# 3. 复制 REST URL 和 Token / Copy REST URL and Token
# 
# 用途 / Usage:
# - 高级限流策略 / Advanced rate limiting
# - 缓存 AI 生成结果 / Cache AI generation results
# - 会话存储 / Session storage
# UPSTASH_REDIS_REST_URL=""
# UPSTASH_REDIS_REST_TOKEN=""

# [OPTIONAL] Sentry（错误追踪和性能监控）
# Sentry (error tracking and performance monitoring)
# 
# 获取方式 / How to obtain:
# 1. 注册 Sentry: https://sentry.io
# 2. 创建项目 / Create project
# 3. 复制 DSN / Copy DSN
# 
# 用途 / Usage:
# - 实时错误追踪 / Real-time error tracking
# - 性能监控 / Performance monitoring
# - 用户反馈收集 / User feedback collection
# NEXT_PUBLIC_SENTRY_DSN=""
# SENTRY_AUTH_TOKEN=""

# [OPTIONAL] Google Analytics（网站分析）
# Google Analytics (website analytics)
# 
# 获取方式 / How to obtain:
# 1. 访问 Google Analytics: https://analytics.google.com
# 2. 创建属性 / Create property
# 3. 复制测量 ID (G-XXXXXXXXXX) / Copy Measurement ID
# 
# 用途 / Usage:
# - 用户行为分析 / User behavior analysis
# - 流量来源追踪 / Traffic source tracking
# - 转化率优化 / Conversion rate optimization
# NEXT_PUBLIC_GA_MEASUREMENT_ID=""


# ============================================================================
# 故障排查指南 / Troubleshooting Guide
# ============================================================================
#
# 问题 1: 应用启动失败，提示缺少环境变量
# Issue 1: Application fails to start, missing environment variables
# 
# 解决方案 / Solution:
# 1. 确保已创建 .env.local 文件（复制 .env.example）
#    Ensure .env.local file exists (copy from .env.example)
# 2. 检查所有 [REQUIRED] 变量是否已填写
#    Check all [REQUIRED] variables are filled
# 3. 运行验证脚本 / Run validation script:
#    npm run validate-env
#
# 问题 2: 数据库连接失败
# Issue 2: Database connection fails
# 
# 解决方案 / Solution:
# 1. 检查 DATABASE_URL 格式是否正确
#    Check DATABASE_URL format is correct
# 2. 确保数据库服务正在运行
#    Ensure database service is running
# 3. 运行数据库迁移 / Run database migrations:
#    npm run prisma:migrate:dev
# 4. 测试连接 / Test connection:
#    npm run prisma:studio
#
# 问题 3: Google OAuth 登录失败
# Issue 3: Google OAuth login fails
# 
# 解决方案 / Solution:
# 1. 检查 NEXTAUTH_URL 是否与当前域名匹配
#    Check NEXTAUTH_URL matches current domain
# 2. 确认 Google Cloud Console 中的重定向 URI 配置正确
#    Confirm redirect URI in Google Cloud Console is correct
# 3. 检查 OAuth 同意屏幕是否已发布
#    Check OAuth consent screen is published
#
# 问题 4: Stripe 支付失败
# Issue 4: Stripe payment fails
# 
# 解决方案 / Solution:
# 1. 确认使用正确的密钥（测试/生产）
#    Confirm using correct keys (test/production)
# 2. 检查 Webhook 端点是否可访问
#    Check webhook endpoint is accessible
# 3. 使用 Stripe CLI 测试本地 Webhook
#    Test local webhook with Stripe CLI
# 4. 查看 Stripe Dashboard 的日志
#    Check logs in Stripe Dashboard
#
# 问题 5: 图像生成失败
# Issue 5: Image generation fails
# 
# 解决方案 / Solution:
# 1. 检查 REPLICATE_API_TOKEN 是否有效
#    Check REPLICATE_API_TOKEN is valid
# 2. 确认账户余额充足
#    Confirm account has sufficient balance
# 3. 查看 Replicate 控制台的错误日志
#    Check error logs in Replicate dashboard
# 4. 检查用户积分余额
#    Check user points balance
#
# ============================================================================
# 更多帮助 / More Help
# ============================================================================
#
# 文档 / Documentation:
# - README.md - 项目概述和快速开始 / Project overview and quick start
# - docs/database-setup.md - 数据库设置指南 / Database setup guide
# - docs/auth-debug-tools.md - 认证调试工具 / Auth debugging tools
#
# 社区支持 / Community Support:
# - GitHub Issues: https://github.com/your-repo/issues
# - Discord: https://discord.gg/your-server
#
# ============================================================================
